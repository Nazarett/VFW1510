//Accessing Images
var images = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "images");
var imageList = images.getDirectoryListing();
    console.log(imageList);

// GALLERY PAGE

// Create Gallery New Window 
var gallery = function(){
    var galleryWindow = Ti.UI.createWindow({
        backgroundColor: "#00a6ed"  // sets gallery window bg to lt blue
    });

    //Title Bar
    var galleryTitleBar = Ti.UI.createView({
        backgroundColor: "#ffb400",  // title bar bg yellow
        top: 20,
        height: 50
    });
    
    //Title Bar Text
    var galleryTitleText = Ti.UI.createLabel({
        text: "Gallery Title",
        color: "#od2c54",  // title text dk blue
        textAlign: "center",
        font: {fontSize: 16, fontFamily: "Helvetica", fontWeight: "bold"}
    });
    
    //Border
    var galleryBorder = Ti.UI.createView({
        backgroundColor: "#f6511d",  // border color orange
        top: titleBar.top + titleBar.height,
        height: 1
    });
    
    //Back Button
    var galleryBackButton = Ti.UI.createLabel({
        backgroundColor: "#f7f5f4",  // sets back button bg to whitish
        text: "< Go Back", 
        color: "#0c2c54", // sets button text to dark blue
        height: 50,
        font: {fontSize: 20, fontFamily: "Helvetica", fontWeight: "bold"},
        bottom: 0,
        width: "50%",
        borderRadius: 50,
        textAlign: "center"
    });
    
    // Scroll bar
    var galleryContainer = Ti.UI.createScrollView({
        width: pWidth,
        contentWidth: pWidth,
        top: titleBar.top + titleBar.height + border.height,
        height: pHeight + titleBar.top - titleBar.height - backButton.height,
        showVerticalScrollIndicator: true,
        backgroundColor: "#7fb800",  // sets container bg to green
        layout: "horizontal"
    });
    
    //Create Thumbnails for Gallery
    for (var i = 0; i < imageList.length; i++){
        var thumbNail = Ti.UI.createView({
            backgroundColor: "#00a6ed",  // sets box bg to lt blue
            top: margin,
            left: margin,
            width: size,
            height: size,
            borderRadius: 12
        });
        
        //Image View for Thumbnails
        var theImage = Ti.UI.createImageView({
            image: "images/" + imageList[i],
            top: 0,
            width: thumbNail.width*2,  // fits image to thumbnail
            height: thumbNail.width*2,  // fits image to thumbnail
            borderRadius: 12
        });
        
        thumbNail.add(theImage);  
        container.add(thumbNail);
    };
    
    // Event Propagation
    container.addEventListener("click", function(event){
    getPicture(event.source.image);
    });
    
    //Closes Window
    var exitWindow = function(){
        galleryWindow.close();
    };
    
    //Code
    backButton.addEventListener("click", exitWindow);
    
    galleryTitleBar.add(galleryTitleText);
    galleryWindow.add(galleryTitleBar, galleryBorder, galleryContainer, galleryBackButton);
    galleryWindow.open();
};



// SINGLE IMAGE PAGE

//Open Image
var getImage = function(imageSource){
    var imageWindow = Ti.UI.createWindow({
        backgroundColor: "#od2c54"  // sets bg to dk blue
    });
    
    //Title Bar
    var titleBar = Ti.UI.createView({
        backgroundColor: "ffb400",
        top: 20,
        height: 50
    });
    
    //Title Bar Text
    var titleText = Ti.UI.createLabel({
        text: "My Picture",
        color: "#fff",  // sets title text to white
        textAlign: "center",
        font: {fontSize: 20, fontFamily: "Helvetica", fontWeight: "bold"}
        });
        
        //Picture View
        var bigImage = Ti.UI.createImageView({
            image: imageSource,  // gets image from thumbnail
            top: 80,
            bottom: 100,
            left: 10,
            right: 10,
            borderRadius: 10
        });
        
        //Image Label
        var imageLabel = Ti.UI.createLabel({
            backgroundColor: "#bbb",
            text: dataSource,
            color: "#fff",
            font: {fontSize: 20, fontFamily: "Helvetica", fontWeight: "bold"},
            bottom: 70,
            width: "100%",
            textAlign: "center"
        });
        
        //Border
        var border = Ti.UI.createView({
            backgroundColor: "#f6511d",  // border color to orange
            top: titleBar.top + titleBar.height,
            height: 1
        });
        
        //Close Button
        var closeButton = Ti.UI.createLabel({
            backgroundColor: "#fff",
            text: "Close",
            color: "#f7f5f4", // button bg to whitish
            height: 50,
            font: {fontSize: 20, fontFamily: "Helvetica", fontWeight: "bold"},
            bottom: 0,
            width: "50%",
            borderRadius: 50,
            textAlign: "center"
        });
        
        //Close Window
        var exitWindow = function(){
            pictureWindow.close();
        };
        
        //Code
        closeButton.addEventListener("click", exitWindow);
        titleBar.add(titleText);
        imageWindow.add(titleBar, border, closeButton, imageLabel, bigImage);
        imageWindow.open();
};

touchButton.addEventListener("click", galleryWindow);